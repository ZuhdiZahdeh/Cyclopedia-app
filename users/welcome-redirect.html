<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Redirecting...</title>
  <script type="module">
    import { auth } from './firebase-config.js';
    import { onAuthStateChanged } from 'firebase/auth';

    document.addEventListener("DOMContentLoaded", () => {
      onAuthStateChanged(auth, (user) => {
        if (!user) {
          window.location.href = "login.html";
          return;
        }

        const lang = localStorage.getItem("language") || "en";
        let targetPage = "welcome-personalized.html";

        if (lang === "ar") {
          targetPage = "welcome-personalized.html";
        } else if (lang === "en") {
          targetPage = "welcome-personalized.html";
        } else if (lang === "he") {
          targetPage = "welcome-hebrew.html";
        }

        window.location.href = targetPage;
      });
    });
  </script>
</head>
<body>
  <main class="form-container">
    <h2>ðŸ”„ Redirecting...</h2>
  </main>
</body>
</html>